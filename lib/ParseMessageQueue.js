'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ParseMessageQueue = undefined;

var _AdapterLoader = require('./Adapters/AdapterLoader');

var _EventEmitterMQ = require('./Adapters/MessageQueue/EventEmitterMQ');

const ParseMessageQueue = {};

ParseMessageQueue.createPublisher = function (config) {
  const adapter = (0, _AdapterLoader.loadAdapter)(config.messageQueueAdapter, _EventEmitterMQ.EventEmitterMQ, config);
  if (typeof adapter.createPublisher !== 'function') {
    throw 'pubSubAdapter should have createPublisher()';
  }
  return adapter.createPublisher(config);
};

ParseMessageQueue.createSubscriber = function (config) {
  const adapter = (0, _AdapterLoader.loadAdapter)(config.messageQueueAdapter, _EventEmitterMQ.EventEmitterMQ, config);
  if (typeof adapter.createSubscriber !== 'function') {
    throw 'messageQueueAdapter should have createSubscriber()';
  }
  return adapter.createSubscriber(config);
};

exports.ParseMessageQueue = ParseMessageQueue;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9QYXJzZU1lc3NhZ2VRdWV1ZS5qcyJdLCJuYW1lcyI6WyJQYXJzZU1lc3NhZ2VRdWV1ZSIsImNyZWF0ZVB1Ymxpc2hlciIsImNvbmZpZyIsImFkYXB0ZXIiLCJtZXNzYWdlUXVldWVBZGFwdGVyIiwiY3JlYXRlU3Vic2NyaWJlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUlBLE1BQU1BLG9CQUFvQixFQUExQjs7QUFFQUEsa0JBQWtCQyxlQUFsQixHQUFvQyxVQUFTQyxNQUFULEVBQTJCO0FBQzdELFFBQU1DLFVBQVUsZ0NBQVlELE9BQU9FLG1CQUFuQixrQ0FBd0RGLE1BQXhELENBQWhCO0FBQ0EsTUFBSSxPQUFPQyxRQUFRRixlQUFmLEtBQW1DLFVBQXZDLEVBQW1EO0FBQ2pELFVBQU0sNkNBQU47QUFDRDtBQUNELFNBQU9FLFFBQVFGLGVBQVIsQ0FBd0JDLE1BQXhCLENBQVA7QUFDRCxDQU5EOztBQVFBRixrQkFBa0JLLGdCQUFsQixHQUFxQyxVQUFTSCxNQUFULEVBQTRCO0FBQy9ELFFBQU1DLFVBQVUsZ0NBQVlELE9BQU9FLG1CQUFuQixrQ0FBd0RGLE1BQXhELENBQWhCO0FBQ0EsTUFBSSxPQUFPQyxRQUFRRSxnQkFBZixLQUFvQyxVQUF4QyxFQUFvRDtBQUNsRCxVQUFNLG9EQUFOO0FBQ0Q7QUFDRCxTQUFPRixRQUFRRSxnQkFBUixDQUF5QkgsTUFBekIsQ0FBUDtBQUNELENBTkQ7O1FBU0VGLGlCLEdBQUFBLGlCIiwiZmlsZSI6IlBhcnNlTWVzc2FnZVF1ZXVlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9hZEFkYXB0ZXIgfSBmcm9tICcuL0FkYXB0ZXJzL0FkYXB0ZXJMb2FkZXInO1xuaW1wb3J0IHtcbiAgRXZlbnRFbWl0dGVyTVFcbn0gZnJvbSAnLi9BZGFwdGVycy9NZXNzYWdlUXVldWUvRXZlbnRFbWl0dGVyTVEnO1xuXG5jb25zdCBQYXJzZU1lc3NhZ2VRdWV1ZSA9IHt9O1xuXG5QYXJzZU1lc3NhZ2VRdWV1ZS5jcmVhdGVQdWJsaXNoZXIgPSBmdW5jdGlvbihjb25maWc6IGFueSk6IGFueSB7XG4gIGNvbnN0IGFkYXB0ZXIgPSBsb2FkQWRhcHRlcihjb25maWcubWVzc2FnZVF1ZXVlQWRhcHRlciwgRXZlbnRFbWl0dGVyTVEsIGNvbmZpZyk7XG4gIGlmICh0eXBlb2YgYWRhcHRlci5jcmVhdGVQdWJsaXNoZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyAncHViU3ViQWRhcHRlciBzaG91bGQgaGF2ZSBjcmVhdGVQdWJsaXNoZXIoKSc7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXIuY3JlYXRlUHVibGlzaGVyKGNvbmZpZyk7XG59XG5cblBhcnNlTWVzc2FnZVF1ZXVlLmNyZWF0ZVN1YnNjcmliZXIgPSBmdW5jdGlvbihjb25maWc6IGFueSk6IHZvaWQge1xuICBjb25zdCBhZGFwdGVyID0gbG9hZEFkYXB0ZXIoY29uZmlnLm1lc3NhZ2VRdWV1ZUFkYXB0ZXIsIEV2ZW50RW1pdHRlck1RLCBjb25maWcpXG4gIGlmICh0eXBlb2YgYWRhcHRlci5jcmVhdGVTdWJzY3JpYmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgJ21lc3NhZ2VRdWV1ZUFkYXB0ZXIgc2hvdWxkIGhhdmUgY3JlYXRlU3Vic2NyaWJlcigpJztcbiAgfVxuICByZXR1cm4gYWRhcHRlci5jcmVhdGVTdWJzY3JpYmVyKGNvbmZpZyk7XG59XG5cbmV4cG9ydCB7XG4gIFBhcnNlTWVzc2FnZVF1ZXVlXG59XG4iXX0=